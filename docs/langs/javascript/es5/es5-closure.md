# 闭包



​	一个变量被重复调用导致无法被销毁（回收），就形成了闭包。闭包形成的条件有两个：

*    函数嵌套函数；
*    内部函数使用外部函数的**`变量`**或**`参数`**。

   如果满足以上两个条件，则就可以把这个**`内部函数`**称作**`闭包`**。

---

### 闭包的特性

​	闭包使用的父函数的参数或变量会被 **`永久保存`** ，直到窗口关闭才被回收。

---

### 闭包的缺点

​	闭包内变量的生命周期和全局变量一样，会**`常驻内存`**，程序关闭才会回收。

```js
// 全局变量：长生不老，只有在窗口关闭的时候才会被回收
var n = 0
document.onclick = function () {
	console.log(`当前是第${++n}次点击页面`)
}
```

```js
// 闭包实现
document.onclick = (function () {
	var n = 0
	return function () {
		console.log(`当前是第${++n}次点击页面`)
	}
}())
```

```js
// 例1
function fn() {
	var a = 1
	return fn2(a)
} 

function fn2(a) {
	a++
	return function () {
		alert(a)
	}
}

var a = fn()
a() // 2
a() // 2
```

